{
  "product_type": "Term Loan",
  "schema_details": {
    "fields_definition": {
      "client_id": { "type": "reference", "format": "string", "mandatory": true },
      "notional": { "type": "currency", "format": "float", "mandatory": true, "min": 100000 },
      "currency": { "type": "reference", "format": "ISO-4217", "mandatory": true },
      "sector": { "type": "reference", "format": "string", "mandatory": true },
      "base_rate": { "type": "percentage", "format": "float", "mandatory": true },
      "spread": { "type": "percentage", "format": "float", "mandatory": true },
      "drawdown_date": { "type": "date", "format": "YYYY-MM-DD", "mandatory": true },
      "maturity_date": { "type": "date", "format": "YYYY-MM-DD", "mandatory": false },
      "rm_comments": { "type": "free_text", "format": "string", "mandatory": false }
    },
    "reference_data": {
      "currency": ["USD", "GBP", "EUR", "HKD", "SGD"],
      "sector": ["TMT", "Energy", "Retail", "Manufacturing", "Real Estate"]
    },
    "derivation_targets": {
      "reference_mapped": ["risk_rating_code", "gl_account_id"],
      "calculated": ["all_in_rate"]
    }
  },
  "target_api_payload": {
    "client_id": "{{client_id}}",
    "sector": "{{sector}}",
    "drawdown_date": "{{drawdown_date}}",
    "maturity_date": "{{maturity_date}}",
    "risk_rating_code": "{{risk_rating_code}}",
    "all_in_rate": "{{all_in_rate}}",
    "facility_limits": [
      {
        "notional": "{{notional}}",
        "currency": "{{currency}}",
        "base_rate": "{{base_rate}}",
        "spread": "{{spread}}",
        "margin_bps": "{{spread * 100}}"
      }
    ]
  }
}
